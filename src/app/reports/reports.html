<!-- Top Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary px-4 py-2 shadow-sm rounded-0">
  <a class="navbar-brand fw-bold" href="/dashboard">
  🚨 RESQALERT DASHBOARD - {{ role }}
</a>
  <div class="ms-auto d-flex align-items-center gap-3">
    <div class="dropdown">
      <button class="btn btn-light dropdown-toggle shadow-sm" type="button" data-bs-toggle="dropdown">
        Menu
      </button>
      <ul class="dropdown-menu dropdown-menu-end shadow-sm rounded">
        <li><a class="dropdown-item" routerLink="/profile">Profile</a></li>
        <li><a class="dropdown-item" routerLink="/settings">Settings</a></li>
        <li><hr class="dropdown-divider"></li>
        <li><a class="dropdown-item" href="#">Help</a></li>
      </ul>
    </div>
    <button class="btn btn-outline-light shadow-sm" (click)="logout()">Logout</button>
  </div>
</nav>

<!-- Main Layout -->
<div class="d-flex" style="min-height: 100vh; background-color: #f8f9fa;">
  <!-- Sidebar -->
  <aside class="bg-white border-end p-4 shadow-sm" style="width: 250px;">
    <h6 class="fw-bold mb-4 text-primary">📂 Navigation</h6>
    <ul class="nav flex-column gap-2">
      <li class="nav-item">
        <a class="nav-link text-dark fw-semibold" [routerLink]="'/dashboard'">
          🏠 Dashboard
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-dark fw-semibold" [routerLink]="'/reports'">
          📊 Reports
        </a>
      </li>
    </ul>
  </aside>

  <!-- Content Area -->
  <main class="flex-fill p-4">
    <h5 class="fw-bold text-primary mb-4">📈 Report</h5>

    <!-- Data Table -->
    <div class="card shadow-sm border-0 rounded-3">
      <div class="card-body">
        <div class="table-responsive">
          <table class="table align-middle table-hover">
            <thead class="table-light">
              <tr class="text-center text-uppercase small">
                <th>#</th>
                <th>Type</th>
                <th>Accident Type</th>
                <th>Status</th>
                <th>Location</th>
                <th>Timestamp</th>
                <th>Media</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of firebaseData; index as i" class="text-center">
                <td>{{ i + 1 }}</td>
                <td>{{ item.media_type }}</td>
                <td>{{ item.accident_type || 'N/A' }}</td>
                <td>
                  <span class="badge bg-success" *ngIf="item.status === 'Rescued'">{{ item.status }}</span>
                  <span class="badge bg-danger" *ngIf="item.status === 'Invalid'">{{ item.status }}</span>
                  <span class="badge bg-secondary" *ngIf="item.status !== 'Rescued' && item.status !== 'Invalid'">
                    {{ item.status }}
                  </span>
                </td>
                <td>
                  <ng-container *ngIf="item.googleMapLink; else noLocation">
                    <a [href]="item.googleMapLink" target="_blank" class="text-decoration-none">
                      View Map<br><small>({{ item.latitude }}, {{ item.longitude }})</small>
                    </a>
                  </ng-container>
                  <ng-template #noLocation>
                    <span class="text-muted">Not available</span>
                  </ng-template>
                </td>
                <td>{{ item.timestamp | date: 'medium' }}</td>
                <td>
                  <a *ngIf="item.media_url" [href]="item.media_url" target="_blank" class="btn btn-sm btn-outline-primary">View</a>
                  <span *ngIf="!item.media_url" class="text-muted">N/A</span>
                </td>
                <td>
                  <div class="d-flex justify-content-center gap-2">
                    <button class="btn btn-sm btn-warning" (click)="markAsResponding(item.id)">Responding</button>
                    <button class="btn btn-sm btn-success" (click)="markAsRescued(item.id)">Rescued</button>
                    <button class="btn btn-sm btn-danger" (click)="markAsInvalid(item.id)">Invalid</button>
                  </div>
                </td>
              </tr>
              <tr *ngIf="firebaseData.length === 0">
                <td colspan="8" class="text-center text-muted">No data available.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </main>
</div>
